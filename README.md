# ğŸ“’ ì¼ê¸°ì¥
> í”„ë¡œì íŠ¸ ê¸°ê°„ 2022.06.13 ~ 2022.07.01  
íŒ€ì› : [malrang](https://github.com/malrang-malrang) [Tiana](https://github.com/Kim-TaeHyun-A) / ë¦¬ë·°ì–´ : [stevenkim](https://github.com/stevenkim18)

- [Ground Rules](#ground-rules)
- [ì‹¤í–‰í™”ë©´](#ì‹¤í–‰í™”ë©´)
- [STEP 1 êµ¬í˜„](#step-1-êµ¬í˜„)
    + [ê³ ë¯¼í–ˆë˜ ê²ƒë“¤(íŠ¸ëŸ¬ë¸” ìŠˆíŒ…)](#ê³ ë¯¼í–ˆë˜-ê²ƒë“¤íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
    + [ì§ˆë¬¸í•œê²ƒë“¤](#ì§ˆë¬¸í•œê²ƒë“¤)
- [STEP 2 êµ¬í˜„](#step-2-êµ¬í˜„)
    + [ê³ ë¯¼í–ˆë˜ ê²ƒë“¤(íŠ¸ëŸ¬ë¸” ìŠˆíŒ…)](#ê³ ë¯¼í–ˆë˜-ê²ƒë“¤íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…-1)
    + [ì§ˆë¬¸í•œê²ƒë“¤](#ì§ˆë¬¸í•œê²ƒë“¤)
- [STEP 3 êµ¬í˜„](#step-3-êµ¬í˜„)
    + [ê³ ë¯¼í–ˆë˜ ê²ƒë“¤(íŠ¸ëŸ¬ë¸” ìŠˆíŒ…)](#ê³ ë¯¼í–ˆë˜-ê²ƒë“¤íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…-2)
    + [ì§ˆë¬¸í•œê²ƒë“¤](#ì§ˆë¬¸í•œê²ƒë“¤)

## Ground Rules
### ğŸŒˆ ìŠ¤í¬ëŸ¼
- 10ì‹œ ~ 10ì‹œ30ë¶„

### ì£¼ê°„ í™œë™ ì‹œê°„
- ì›”, í™”,ìˆ˜, ëª©, ê¸ˆ : 10ì‹œ ~ 22ì‹œ
- ìˆ˜ìš”ì¼ : ê°œì¸ê³µë¶€
- ì ì‹¬ì‹œê°„ : 12ì‹œ ~ 13ì‹œ
- ì €ë…ì‹œê°„ : 18ì‹œ ~ 20ì‹œ
- ìƒí™©ì— ë”°ë¼ ì¡°ì • ê°€ëŠ¥

###  ğŸª§ ì½”ë”© ì»¨ë²¤ì…˜

#### Commit ê·œì¹™
ì»¤ë°‹ ì œëª©ì€ ìµœëŒ€ 50ì ì…ë ¥
ë³¸ë¬¸ì€ í•œ ì¤„ ìµœëŒ€ 72ì ì…ë ¥

#### Commit ë©”ì„¸ì§€
chore: ì½”ë“œ ìˆ˜ì •, ë‚´ë¶€ íŒŒì¼ ìˆ˜ì •.  
feat: ìƒˆë¡œìš´ ê¸°ëŠ¥ êµ¬í˜„.  
style: ìŠ¤íƒ€ì¼ ê´€ë ¨ ê¸°ëŠ¥.(ì½”ë“œì˜ êµ¬ì¡°/í˜•íƒœ ê°œì„ )  
add: feat ì´ì™¸ì˜ ë¶€ìˆ˜ì ì¸ ì½”ë“œ ì¶”ê°€, ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€  
file: ìƒˆë¡œìš´ íŒŒì¼ ìƒì„±, ì‚­ì œ ì‹œ  
fix: ë²„ê·¸, ì˜¤ë¥˜ í•´ê²°.  
docs: READMEë‚˜ WIKI ë“±ì˜ ë¬¸ì„œ ê°œì •.   
correct: ì£¼ë¡œ ë¬¸ë²•ì˜ ì˜¤ë¥˜ë‚˜ íƒ€ì…ì˜ ë³€ê²½, ì´ë¦„ ë³€ê²½ ë“±ì— ì‚¬ìš©í•©ë‹ˆë‹¤.  
move: í”„ë¡œì íŠ¸ ë‚´ íŒŒì¼ì´ë‚˜ ì½”ë“œ(ë¦¬ì†ŒìŠ¤)ì˜ ì´ë™.  
refactor: ì „ë©´ ìˆ˜ì •ì´ ìˆì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤  
test: í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.  

#### Commit Body ê·œì¹™
ì œëª© ëì— ë§ˆì¹¨í‘œ(.) ê¸ˆì§€
í•œê¸€ë¡œ ì‘ì„±

#### ë¸Œëœì¹˜ ì´ë¦„ ê·œì¹™
`STEP1`, `STEP2`, `STEP3`

## ì‹¤í–‰í™”ë©´
![ã„´ã„´](https://user-images.githubusercontent.com/88717147/174244161-6825eafe-d1ec-4336-a3f9-a1fc96c3f7d6.gif)

## STEP 1 êµ¬í˜„
1. ì¼ê¸°ì¥ List í˜ì´ì§€ êµ¬í˜„
2. ì¼ê¸°ì¥ ì¶”ê°€/ìˆ˜ì • í˜ì´ì§€ êµ¬í˜„

### êµ¬ì¡°
![](https://i.imgur.com/IgC8p5k.png)

### DiaryView Autolayout
![](https://i.imgur.com/etIy3bQ.png)

## ê³ ë¯¼í–ˆë˜ ê²ƒë“¤(íŠ¸ëŸ¬ë¸” ìŠˆíŒ…)
1ï¸âƒ£ **ìš”êµ¬ì„œì™€ ìœ ì‚¬í•˜ë„ë¡ ë„¤ë¹„ê²Œì´ì…˜ë°” ë²„íŠ¼ textì˜ í¬ê¸°ì™€ êµµê¸°ë¥¼ ë‘ê»ê²Œ í• ìˆ˜ ì—†ì„ê¹Œ?ğŸ¤”**

`DiaryViewController`ì˜ ë„¤ë¹„ê²Œì´ì…˜ë°” right item + ë²„íŠ¼ êµµê¸°(weight) ë¥¼ ë‘ê»ê²Œ í• ìˆ˜ ì—†ì„ê¹Œ ê³ ë¯¼í•˜ì˜€ê³  `UIFont, NSAttributedString` ì„ í™œìš©í•´ textì˜ sizeì™€ êµµê¸°(weight) ë¥¼ ì„¤ì •í•´ì£¼ì—ˆë‹¤.

```swift
let weight = UIFont.systemFont(ofSize: 35, weight: .light)
let attributes = [NSAttributedString.Key.font: weight]

registerButton.setTitleTextAttributes(attributes, for: .normal)
```

2ï¸âƒ£ **codeë¡œ í…Œì´ë¸”ë·° ì…€ì„ ë§Œë“¤ ë•Œ ì–´ë–¤ ì´ë‹ˆì…œë¼ì´ì ¸ë¥¼ ì‚¬ìš©í•´ì•¼ í• ê¹Œ?ğŸ¤”**
TableviewCellì—ëŠ” `init(style: UITableViewCell.CellStyle, reuseIdentifier: String?)` ì™€ `init?(coder: NSCoder)` ì´ë‹ˆì…œë¼ì´ì ¸ê°€ ìˆìŠµë‹ˆë‹¤.

```swift
override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
    super.init(style: style, reuseIdentifier: reuseIdentifier)
    ...
}
```

3ï¸âƒ£ **ì¼ê¸°ì¥ ì¶”ê°€ ì‹œ í™”ë©´ ì „í™˜ ë°©ì‹: push vs modal**
ì¼ê¸°ì¥ ì¶”ê°€í•˜ëŠ” í™”ë©´ì„ ì „í™˜í•˜ëŠ” ë°©ì‹ì— ëŒ€í•´ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.
ì¼ê¸°ì¥ ëª©ë¡ì„ ë³´ì—¬ì£¼ëŠ” ê¸°ì¡´ì˜ ì‘ì—…ê³¼ ì—°ê²°ë˜ëŠ” ì‘ì—…ì´ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ ì‘ì—…ì„ ì ì‹œ ìˆ˜í–‰í•œë‹¤ê³  ìƒê°í•´ì„œ ëª¨ë‹¬ë¡œ ë„ì› ìŠµë‹ˆë‹¤.
ì´ë•Œ, ê¸°ëŠ¥ìš”êµ¬ì„œì— ë§ê²Œ ìƒë‹¨ì— ë°”ë¥¼ ì¶”ê°€í•˜ê³  ì‹¶ì–´ì„œ ìƒˆë¡œìš´ ë„¤ë¹„ê²Œì´ì…˜ì„ ì—°ê²°í–ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ëª¨ë‹¬ ë°©ì‹ìœ¼ë¡œ í™”ë©´ì„ ë„ìš°ê²Œë˜ë©´ ë„¤ë¹„ê²Œì´ì…˜ë°”ì˜ left itemì„ ì§ì ‘ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸°ìœ„í•´ ë²„íŠ¼ì„ êµ¬í˜„í•˜ì—¬ ë„¤ë¹„ê²Œì´ì…˜ì˜ left itemì— ì¶”ê°€í•´ì£¼ì—ˆìœ¼ë‚˜ ê¸°ëŠ¥ìš”êµ¬ì„œì™€ ë™ì¼í•˜ê²Œ ë§Œë“¤ê¸°ìœ„í•´ì„œëŠ” ë²„íŠ¼ì— indicatorì´ë¯¸ì§€ë¥¼ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•˜ëŠ” ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.

```
ë²„íŠ¼ì— ì‚¬ìš©ëœ ì´ë¯¸ì§€ ì´ë¦„ systemName: "chevron.left"
```
![](https://i.imgur.com/PANLzTv.png)

button ì— ì´ë¯¸ì§€ë¥¼ ë„£ê¸°ìœ„í•´ UIButtonì„ extension í•˜ì—¬ convenience init, UIButtonì˜ setImage(), setTitle() ë¥¼ í™œìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
extension UIButton {
    enum SystemImage {
        static let indicator = "chevron.left"
    }
    
    convenience init(title: String?, imageName: String? = SystemImage.indicator) {
        self.init()
        self.setImage(UIImage(systemName: SystemImage.indicator), for: .normal)
        self.setTitle(title, for: .normal)
        self.titleLabel?.font = UIFont.systemFont(ofSize: 15, weight: .semibold)
        self.setTitleColor(.systemBlue, for: .normal)
    }
}
```

ê·¸í›„ ì¼ê¸°ì¥ í”„ë¡œì íŠ¸ì™€ í˜•íƒœê°€ ìœ ì‚¬í•œ ë©”ëª¨ì•±ì„ ì‚´í´ë³´ë‹ˆ ë©”ëª¨ ì¶”ê°€ ì‹œ ë„¤ë¹„ê²Œì´ì…˜ ë°©ì‹(push)ìœ¼ë¡œ í™”ë©´ ì „í™˜ì´ ë˜ëŠ” ê²ƒì„ í™•ì¸í•˜ì˜€ê³ , ì¶”ê°€í•´ì•¼í•˜ëŠ” ê¸°ëŠ¥ì¤‘ ì¼ê¸°ì¥ ìˆ˜ì • í˜ì´ì§€(UI)ë¥¼ êµ¬í˜„í• ë•ŒëŠ” ë„¤ë¹„ê²Œì´ì…˜ ë°©ì‹ìœ¼ë¡œ í™”ë©´ì „í™˜ í•˜ë„ë¡ ê²°ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

ì¼ê¸°ì¥ ì¶”ê°€ í˜ì´ì§€ì™€ ì¼ê¸°ì¥ ìˆ˜ì •í˜ì´ì§€ì˜ UIê°€ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ ViewControllerë¡œ ì‚¬ìš©í• ìˆ˜ìˆë„ë¡ ì¼ê¸°ì¥ ì¶”ê°€í˜ì´ì§€ í™”ë©´ìœ¼ë¡œ ì „í™˜í•˜ëŠ” ë°©ë²•ì„ ëª¨ë‹¬ì—ì„œ ë„¤ë¹„ê²Œì´ì…˜ ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.

ë„¤ë¹„ê²Œì´ì…˜ ë°©ì‹ìœ¼ë¡œ ì „í™˜í•˜ê²Œë˜ë©´ ìë™ìœ¼ë¡œ backButtonItemì— indicatorì´ë¯¸ì§€ê°€ ì¶”ê°€ëœ ë²„íŠ¼ì´ ìƒì„±ë˜ê¸° ë•Œë¬¸ì— ë”°ë¡œ ë²„íŠ¼ì„ ë§Œë“¤ì–´ ì¶”ê°€í•´ì£¼ì§€ ì•Šì•„ë„ë˜ë„ë¡ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

**ëª¨ë‹¬ í™”ë©´ì „í™˜ ë°©ì‹ì˜ ì½”ë“œ**
```swift
let viewContoller = RegisterViewController(backButtonTitle: navigationItem.title)

// modal ë°©ì‹ì´ì§€ë§Œ navigationBar ë¥¼ ì‚¬ìš©í•˜ê¸°ìœ„í•´ NavigationControllerì˜ rootViewë¡œ ì„¤ì •í•´ì¤€ ì½”ë“œ
let navigationController = UINavigationController(rootViewController: viewContoller)
        
navigationController.modalPresentationStyle = .fullScreen
        
present(navigationController, animated: true)
```
**ë„¤ë¹„ê²Œì´ì…˜ í™”ë©´ì „í™˜ ë°©ì‹ì˜ ì½”ë“œ**
```swift
let viewContoller = UpdateViewController()

navigationController?.pushViewController(viewContoller, animated: true)
```

4ï¸âƒ£ **init vs loadView vs ViewDidLoad**
initì€ í”„ë¡œí¼í‹°ì˜ ê°’ì„ ì´ˆê¸°í™”í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
UpdateViewController ì—ì„œ ì´ì „ í™”ë©´ì—ì„œ ë°›ì€ ê°’ì„ í†µí•´ UIìš”ì†Œì˜ textë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.
```swift
init(diaryData: DiaryData? = nil) {
    super.init(nibName: nil, bundle: nil)
        
    setUpEditPage(diaryData: diaryData)
}
```
[loadView](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621454-loadview)
loadViewëŠ” view Controllerê°€ ê´€ë¦¬í•˜ëŠ” viewë¥¼ ìƒì„±í•  ë•Œ í˜¸ì¶œë©ë‹ˆë‹¤.
view í”„ë¡œí¼í‹°ì— root viewë¥¼ í• ë‹¹í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
super.loadViewëŠ” í˜¸ì¶œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

[viewDidLoad](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621495-viewdidload)
viewDidLoadëŠ” ë·° ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë©”ëª¨ë¦¬ì— ë¡œë“œëœ í›„ í˜¸ì¶œë©ë‹ˆë‹¤.
ë·°ì— ëŒ€í•œ ì´ˆê¸°í™”ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.
```swift
override func viewDidLoad() {
    super.viewDidLoad()
        
    setUpView()
    setUpNavigationController()
    setUpTableView()
    setUpTableViewLayout()
    setUpDataSource()
    setUpSampleData()
}
```



5ï¸âƒ£ **ë²”ìš©ì ì¸ ë©”ì„œë“œ**

* UIButtonì˜ initì— titleê³¼ imageNameì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ ë‹¤ì–‘í•œ ë²„íŠ¼ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
convenience init(title: String?, imageName: String? = SystemImage.indicator)
```

* ì…€ì˜ ì‹ë³„ìë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
```swift
extension UITableViewCell {
    static var identifier: String {
        return String(describing: Self.self)
    }
}
```

* ì•„ë˜ë°©ì‹ìœ¼ë¡œ registerë¥¼ êµ¬í˜„í•˜ë©´ identifier ì‹¤ë³„ì ì—†ì´ë„ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.
```swift
extension UITableView {
    func register<T: UITableViewCell>(_ type: T.Type)  {
        self.register(type, forCellReuseIdentifier: "\(type)")
    }
}

tableView.register(DiaryCell.self)
tableView.register(UITableViewCell.self)

//ê¸°ì¡´ ë°©ì‹
//tableView.register(DiaryCell.self, forCellReuseIdentifier: DiaryCell.identifier)
//tableView.register(UITableViewCell.self, forCellReuseIdentifier: UITableViewCell.identifier)
```

* íŒŒì¼ ì´ë¦„ì„ ê°€ì§€ê³  ë°ì´í„°ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤. ë©”ì„œë“œ í˜¸ì¶œ ì‹œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì—†ì´ ë°”ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ static ë©”ì„œë“œë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
```swift
struct AssetManager {
    static func convert(fileName: String) -> Data? {
        guard let assetFile = NSDataAsset(name: fileName) else {
            return nil
        }
        
        return assetFile.data
    }
}
```

* Decodableì„ ì±„íƒí•œ íƒ€ì…ì„ JsonDecoderë¥¼ ì‚¬ìš©í•´ì„œ ë°ì´í„°ë¥¼ íŒŒì‹±í•©ë‹ˆë‹¤.
```swift
extension Decodable {
    static func parse(data: Data) -> [Self]? {
        guard let data = try? Json.shared.decode([Self].self, from: data) else {
            return nil
        }
        return data
    }
}

final class Json {
    static let shared = JSONDecoder()
    
    private init() { }
}
```

6ï¸âƒ£ DateFormatter

* dateFormatterì˜ í”„ë¡œí¼í‹° ì„¸íŒ…ì„ í†µí•´ ì•± ì‚¬ìš©ìì˜ ìœ„ì¹˜ì— ë§ê²Œ ì‹œê°„ì„ í‘œì‹œí•©ë‹ˆë‹¤.
```swift
dateFormatter.dateStyle = .long
dateFormatter.locale = .autoupdatingCurrent
```
* Json ì—ì„œ Date íƒ€ì…ìœ¼ë¡œ íŒŒì‹±í•˜ê¸°
    Json ë°ì´í„° íŒŒì‹±ì— ì‚¬ìš©ë˜ëŠ” ë°ì´í„° íƒ€ì…ì˜ í”„ë¡œí¼í‹°ê°€ Dateì¸ ê²½ìš°ì—ëŠ” ë³„ë„ì˜ ë””ì½”ë”©ì„ í•˜ì§€ ì•Šìœ¼ë©´ Double ê°’ìœ¼ë¡œ ë””ì½”ë”©ì„ ì‹œë„í•©ë‹ˆë‹¤. ì´ ë•ë¶„ì— ì œê³µëœ JSONFileì— ì‘ì„±ëœ double ë°ì´í„°(timeIntervalSinceReferenceDate)ë¥¼ ë³„ë„ì˜ ì²˜ë¦¬ ì—†ì´ Dateë¡œ íŒŒì‹±í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

* ì‹œë®¬ë ˆì´í„°ê°€ ë™ì‘í•˜ëŠ” ì§€ì—­ì„ ë°”ê¾¸ë ¤ë©´ í”„ë¡œì íŠ¸ì˜ ì„¸íŒ…ì—ì„œ Localizationì„ ì¶”ê°€í•˜ê³  ì‹œë®¬ë ˆì´í„° ì„¸íŒ… ì•±ì—ì„œ ìœ„ì¹˜ë¥¼ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤.

![](https://i.imgur.com/ueNvuq9.png)


## ì§ˆë¬¸í•œê²ƒë“¤
1ï¸âƒ£ **`UITableViewCell()` vs `tableView.dequeueReusableCell(withIdentifier: UITableViewCell.identifier, for: indexPath)`**

ìœ„ ë‘ ë°©ì‹ ëª¨ë‘ ê°™ì€ ê²°ê³¼ë¥¼ ì‹œë®¬ë ˆì´í„°ì—ì„œ ë³´ì´ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤.
cell ìºìŠ¤íŒ… ì‹¤íŒ¨ ì‹œ UITableViewCell() ë¥¼ ë°˜í™˜í•˜ëŠ” ê²ƒì´ ì•ˆì „í•˜ì§€ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.

ê±°ì˜ ì‹¤íŒ¨í•  ê²½ìš°ê°€ ì—†ê¸° ë•Œë¬¸ì— ì „ìë¡œ êµ¬í˜„í•´ë„ ë¬´ë°©í•˜ë‹¤ê³  í•©ë‹ˆë‹¤.


2ï¸âƒ£ **ì‹±ê¸€í„´ íŒ¨í„´ì„ ì‚¬ìš©í• ë•Œ class vs struct ì–´ë–¤ê²ƒì„ ì‚¬ìš©í•˜ëŠ”ê²ƒì´ ì¢‹ì„ê¹Œìš”?**
ìƒí™©ë§ˆë‹¤ ë‹¤ë¥¼ìˆ˜ ìˆê² ì§€ë§Œ ë³´í†µ ì–´ë–¤ê²ƒì„ ì‚¬ìš©í•˜ëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤!

ì•„ë˜ì˜ íƒ€ì…ë“¤ì€ ì˜ˆë¥¼ë“¤ì–´ parse ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ DateFormatterë¥¼ ì‚¬ìš©í• ë•Œë§ˆë‹¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ìƒì„±ë˜ëŠ”ê²ƒì„ ë°©ì§€í•˜ê¸°ìœ„í•´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•œë²ˆë§Œ ë§Œë“¤ì–´ ì‚¬ìš©í• ìˆ˜ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

êµ¬ì¡°ì²´ë¡œ ì‹±ê¸€í†¤ì„ ë§Œë“¤ ê²½ìš° ê°’ íƒ€ì…ì´ë¼ì„œ ê³µìœ ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ê°€ ìˆ˜ì •ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìƒê¸¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë˜, FormatterëŠ” privateìœ¼ë¡œ DateFormatter(Formatteríƒ€ì…ì´ ì•„ë‹Œ) í”„ë¡œí¼í‹°ë¥¼ ê°€ì ¸ì„œ ì‹±ê¸€í†¤ìœ¼ë¡œ ë³´ê¸´ í˜ë“¤ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

ì´ì²˜ëŸ¼ ì‹±ê¸€í†¤ ì²˜ëŸ¼ íƒ€ì…ì„ êµ¬í˜„í• ë•Œ classì™€ structë¥¼ ì„ íƒí•˜ëŠ” ê¸°ì¤€ì— ëŒ€í•´ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.

ì£¼ë¡œ classë¡œ ì‚¬ìš©í•´ì„œ ì‹±ê¸€í†¤ì„ ë§Œë“ ë‹¤ê³  í•©ë‹ˆë‹¤.

Swiftì—ì„œ ì‹±ê¸€í†¤ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê°ì²´ë“¤ì„ ë³´ë©´ ê±°ì˜ class(URLSession, Notification ë“±ë“±)ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.

êµ¬ì¡°ì²´ë¡œ ë§Œë“¤ì–´ì•¼í•  ê²½ìš°ì—ëŠ” ê·¸ëƒ¥ ì „ì—­ë³€ìˆ˜ë¡œ ì„ ì–¸í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

```swift
class Json {
    static let shared = JSONDecoder()
    
    private init() { }
}

struct Formatter {
    static private let dateFormatter = DateFormatter()
    
    private init() { }
}
```

3ï¸âƒ£ **ViewControllerë“¤ì˜ ê³µí†µëœ ê¸°ëŠ¥ë“¤ì„ ì¤‘ë³µì œê±° í•˜ëŠ” ë°©ë²•ğŸ¤”**

ì¤‘ë³µ ì½”ë“œ ì œê±°í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìƒˆë¡œìš´ íƒ€ì…ì„ ë§Œë“¤ì§€, ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì§€ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤. ì•„ë˜ ì½”ë“œì²˜ëŸ¼ ìƒˆë¡œìš´ íƒ€ì…ì„ ë§Œë“¤ ê²½ìš° @objc ë©”ì„œë“œë¥¼ ì¸ì‹í•˜ì§€ ëª»í•´ì„œ crashê°€ ë‚©ë‹ˆë‹¤.(NotificationCenterë¥¼ ë“±ë¡í• ë•Œ ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤!)

ìœ„ ë¬¸ì œëŠ” `addObserver` ë©”ì„œë“œì—ì„œ ì²«ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ì— selector ë©”ì„œë“œê°€ êµ¬í˜„ëœ ìœ„ì¹˜, ì¦‰ selfë¥¼ ë„˜ê²¨ì¤˜ì„œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

- ì¶”ìƒ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì„ ê²½ìš° ìì‹ í´ë˜ìŠ¤ë§Œ ë´¤ì„ ë•ŒëŠ” êµ¬í˜„ëœ ê¸°ëŠ¥ì„ ì•Œê¸° ì–´ë ¤ìš´ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
- protocol extension ê¸°ë³¸ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì€ @objc í•¨ìˆ˜ ë•Œë¬¸ì— ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
- ViewControllerì˜ extensionìœ¼ë¡œ ë¶„ë¦¬í•˜ëŠ” ê²ƒì€ ì‹¤ì œë¡œëŠ” ê¸°ëŠ¥ ë¶„ë¦¬ê°€ ë˜ì§€ ì•Šì•„ì„œ ì˜ë¯¸ê°€ ì—†ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.
- TextViewë‚˜ TextViewì˜ extensionìœ¼ë¡œ ë¶„ë¦¬ í›„ êµ¬í˜„í•˜ëŠ” ë°©ì‹ê³¼ ìƒˆë¡œìš´ íƒ€ì…ì„ ë§Œë“¤ì–´ì„œ ê¸°ëŠ¥ì„ ë¶„ë¦¬í•˜ëŠ” ë°©ì‹ì€ ë‚´ë¶€ êµ¬í˜„ì€ ìœ ì‚¬í•©ë‹ˆë‹¤. ì „ìì˜ ê²½ìš° UITextView ëŒ€ì‹ ì— ì»¤ìŠ¤í…€ TextViewë¥¼ ì´ìš©í•´ì„œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. í›„ìëŠ” í”„ë¡œí¼í‹°ë¡œ ìƒˆë¡œìš´ íƒ€ì…ì„ ê°€ì ¸ì„œ ì œì¼ ëª…ì‹œì ìœ¼ë¡œ êµ¬í˜„ëœ ê¸°ëŠ¥ì„ í‘œì‹œí•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.

```swift
final class Keyboard {
    enum Const {
        static let keyboardBounds = "UIKeyboardBoundsUserInfoKey"
    }
    
    var bottomContraint: NSLayoutConstraint?
    
    func setUpKeyboardNotification() {
        NotificationCenter.default.addObserver(self,
                                               selector: #selector(keyboardWillAppear),
                                               name: UIResponder.keyboardWillShowNotification,
                                               object: nil)
        NotificationCenter.default.addObserver(self,
                                               selector: #selector(keyboardWillHide),
                                               name: UIResponder.keyboardWillHideNotification,
                                               object: nil)
    }
    
    @objc private func keyboardWillAppear(notification: Notification) {
        guard let keyboardBounds = notification.userInfo?[Const.keyboardBounds] as? NSValue else {
            return
        }
        
        bottomContraint?.constant = -keyboardBounds.cgRectValue.height
    }
    
    @objc private func keyboardWillHide() {
        bottomContraint?.constant = .zero
    }
}
```

---

## STEP 2 êµ¬í˜„

## ê³ ë¯¼í–ˆë˜ ê²ƒë“¤(íŠ¸ëŸ¬ë¸” ìŠˆíŒ…)
1ï¸âƒ£ **UIë¥¼ êµ¬í˜„í•˜ê¸°ìœ„í•œ sampleë°ì´í„° ê´€ë ¨ ë¡œì§ì˜ ìœ„ì¹˜**

CoreDataì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸°ì „ tableViewë¥¼ êµ¬í˜„í•˜ê¸°ìœ„í•´ ì‚¬ìš©ëœ Assetì— ì €ì¥ëœ sampleë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¡œì§ì„ ì–´ë””ì„œ ê´€ë¦¬í•´ì•¼í• ì§€ ìœ„ì¹˜ë¥¼ ê³ ë¯¼í•˜ì˜€ìŠµë‹ˆë‹¤.

ì¶”í›„ ì‚¬ìš©ë  ì¼ì´ ì—†ê¸°ë•Œë¬¸ì— ViewControllerë¥¼ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ í•´ë‹¹ ë¡œì§ì„ Sample íƒ€ì…ì„ ë§Œë“¤ì–´ ë¶„ë¦¬í•˜ì˜€ìœ¼ë‚˜ Assetì„ ê´€ë¦¬í•˜ëŠ” AssetManageríƒ€ì…ì—ì„œ í•´ë‹¹ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ë„ë¡ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
struct Sample {
    enum Const {
        static let sample = "sample"
    }
    
    static func get() -> [DiaryDTO]? {
        guard let assetData = AssetManager.convert(fileName: Const.sample) else {
            return nil
        }
        
        guard let diaryData = DiaryDTO.parse(data: assetData) else {
            return nil
        }
        
        return diaryData
    }
}
```
Sample íƒ€ì…ì˜ get() ë©”ì„œë“œë¥¼ ì œë„¤ë¦­ì„ í™œìš©í•˜ì—¬ Decodableì„ ì±„íƒí•˜ëŠ” íƒ€ì…ìœ¼ë¡œ ë°˜í™˜í•˜ë„ë¡ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
struct AssetManager {
    enum Const {
        static let sample = "sample"
    }
    
    private static func convert(fileName: String) -> Data? {
        guard let assetFile = NSDataAsset(name: fileName) else {
            return nil
        }
        
        return assetFile.data
    }
    
    static func get<T: Decodable>() -> [T]? {
           guard let assetData = AssetManager.convert(fileName: Const.sample) else {
               return nil
           }
           
           guard let diaryData = T.parse(data: assetData) else {
               return nil
           }
           
           return diaryData
       }
}
```
ì œë„¤ë¦­ì„ ì‚¬ìš© í•˜ëŠ” ë©”ì„œë“œ(getë©”ì„œë“œ)ì˜ í˜¸ì¶œ
```swift
let sampleData: [DiaryDTO] = AssetManager.get()
```
ìƒìˆ˜ë‚˜ ë³€ìˆ˜ì— íƒ€ì… ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ì—¬ ë°˜í™˜ë˜ëŠ” íƒ€ì…ì„ ì¶”ë¡ í• ìˆ˜ìˆë„ë¡ íƒ€ì…ì„ ëª…ì‹œí•´ì£¼ë©´ ëœë‹¤!

2ï¸âƒ£ **Keyboardíƒ€ì…ê³¼ KeyBoardë¥¼ì‚¬ìš©í•˜ëŠ” ì£¼ì²´ ë¥¼ ì£¼ì…ë°›ëŠ” ë°©ë²•** 

textViewì—ì„œ ì‚¬ìš©ë˜ëŠ” í‚¤ë³´ë“œê´€ë ¨ ê¸°ëŠ¥ë“¤ì€ KeyBoardíƒ€ì… ë§Œë“¤ì–´ êµ¬í˜„í•˜ì˜€ë‹¤.

textViewì—ì„œ ì‚¬ìš©ë˜ëŠ” í‚¤ë³´ë“œë¥¼ ë¹„í™œì„±í™” í•˜ê¸° ìœ„í•´ SwipeGestureë¥¼ ì¶”ê°€í•˜ê¸°ìœ„í•´ì„œëŠ” KeyBoardë¥¼ ì‚¬ìš©í•˜ëŠ” ì£¼ì²´(ViewController, textView)ë¥¼ ì•Œê³ ìˆì–´ì•¼ í•´ë‹¹ ì£¼ì²´ì— ì œìŠ¤ì³ë¥¼ ì¶”ê°€í•´ì¤„ìˆ˜ ìˆê²Œëœë‹¤.

ê·¸ë ‡ë‹¤ë©´ KeyBoardíƒ€ì…ì€ ì‚¬ìš©í•˜ëŠ” ì£¼ì²´ë¥¼ ì•Œê³ ìˆì–´ì•¼ í•˜ê¸°ë•Œë¬¸ì— í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ê³ ìˆì–´ì•¼í•œë‹¤ê³  ìƒê°í–ˆê³  KeyBoardíƒ€ì…ì„ OOP ì ìœ¼ë¡œ ì„¤ê³„í•˜ê¸° ìœ„í•´ í•´ë‹¹ í”„ë¡œí¼í‹°ë¥¼ ì€ë‹‰í™”í•˜ì—¬ init()ìœ¼ë¡œ ì£¼ì…ë°›ì„ì§€, ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ ì£¼ì…ë°›ì„ì§€ ê³ ë¯¼í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
final class Keyboard {
    enum Const {
        static let keyboardBounds = "UIKeyboardBoundsUserInfoKey"
    }
    
    private let bottomContraint: NSLayoutConstraint?
    private let textView: UITextView?
    
    init(bottomContraint: NSLayoutConstraint, textView: UITextView) {
        self.textView = textView
        self.bottomContraint = bottomContraint
    }
```
KeyBoardíƒ€ì…ì„ ì´ˆê¸°í™” í• ë•Œ í•œë²ˆì— ì£¼ì…í• ìˆ˜ìˆë„ë¡ init()ì„ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.

3ï¸âƒ£ **SceneDelegateì—ì„œ BackGroundë¡œ ì§„ì…í•  ë•Œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ë²•(Notification vs ë¸ë¦¬ê²Œì´íŠ¸)**

ë°±ë“œë¼ìš´ë“œì—ì„œ ì§„ì…í•  ë•Œ SceneDelegateì— ìˆëŠ” sceneDidEnterBackground(_ scene: UIScene) ë©”ì„œë“œê°€ í˜¸ì¶œë©ë‹ˆë‹¤.ì´ë•Œ, ì €ì¥ ë©”ì„œë“œê°€ UpdateViewController ì— ìˆì–´ì„œ ë¸ë¦¬ê²Œì´íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
SceneDelegateì— í”„ë¡œí¼í‹°ë¥¼ ì„ ì–¸í•˜ëŠ” ê²ƒì´ ë‹¨ì ì´ ë  ìˆ˜ë„ ìˆë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.
ë°˜ë©´, notificationì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ëŠ” UpdateViewControllerì— ì§„ì… í›„ ê³„ì† ê´€ì°°í•´ì•¼í•´ì„œ ì„±ëŠ¥ìƒìœ¼ë¡œ ìƒëŒ€ì ìœ¼ë¡œ ì¢‹ì§€ ì•Šì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë˜, ê´€ì°° ëŒ€ìƒì´ ë§ì„ ê²½ìš° ë””ë²„ê¹…í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.

```swift
class SceneDelegate: UIResponder, UIWindowSceneDelegate {

    weak var delegate: BackGroundDelegate?
    
    func sceneDidEnterBackground(_ scene: UIScene) {
        delegate?.updateCoredata()
    }
 ...   
}

protocol BackGroundDelegate: AnyObject {
    func updateCoredata()
}

extension UpdateViewController: BackGroundDelegate {
    func updateCoredata() {
        saveData()
    }
}
```

4ï¸âƒ£ **textView textì—ì„œ title ì´ë‘ body ë‚˜ëˆ„ê¸°**

UpdateViewControllerì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ” extensionì´ë¼ì„œ privateìœ¼ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
`\n` ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ë‰œ ë¬¸ìì—´ì—ì„œ ì²« ë¬¸ìì—´ë§Œ titleë¡œ ì„¤ì •í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” bodyë¡œ ê³ ë ¤ë©ë‹ˆë‹¤.
ì‚¬ìš©ìê°€ bodyë¥¼ ì‘ì„±í•˜ì§€ ì•Šì€ ê²½ìš°ëŠ” ë¹ˆ ë¬¸ìì—´ì´ ì €ì¥ë˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
ë”°ë¼ì„œ, UpdateViewControllerëŠ” ë³„ë„ì˜ í”„ë¡œí¼í‹° ì—†ì´ textviewì˜ ë°ì´í„°ë¥¼ ì ì ˆíˆ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```swift
private extension UITextView {
    enum Const {
        static let separator: Character = "\n"
        static let defaultBody = ""
    }
    
    func extractData(date: String?) -> (
        title: String,
        body: String,
        date: Date
    )? {
        guard let date = date else {
            return nil
        }
        
        let splitedText = text.split(
            separator: Const.separator,
            maxSplits: 1
        ).map {
            String($0)
        }
        
        let body: String
        
        switch splitedText.count {
        case 1:
            body = Const.defaultBody
        case 2:
            guard let lastText = splitedText.last else {
                return nil
            }
            
            body = lastText
        default:
            return nil
        }
        
        guard let title = splitedText.first,
              let date = Formatter.getDate(from: date) else {
            return nil
        }
        
        return (title, body, date)
    }
}
```

ì‚¼í•­ì—°ì‚¬ìì™€ nil ë³‘í•©ì—°ì‚°ìê°€ ìƒëŒ€ì ìœ¼ë¡œ ì„±ëŠ¥ì´ ì¢‹ì§€ ì•Šì•„ì„œ ì‚¬ìš©ì„ ì§€ì–‘í•˜ë ¤ê³  í–ˆì§€ë§Œ ê°€ë…ì„± ì¸¡ë©´ì—ì„œ ì¢‹ì§€ ì•Šì•„ ë‘˜ ë‹¤ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤. 

```swift
var title: String? {
        let text = self.text.components(separatedBy: "\n")
        return text.first == "" ? nil : text.first
}
    
var body: String {
        let splitedText = self.text.split(separator: "\n", maxSplits: 1)
        let body = splitedText.map { String($0) }
        return body[safe: 1] ?? ""
}
```
ìœ„ì™€ ê°™ì´ ì—°ì‚°í”„ë¡œí¼í‹°ë¥¼ í†µí•´ titleê³¼ bodyë¥¼ ê°ê° ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë•Œ, ì ‘ê·¼í•  ë•Œë§ˆë‹¤ textë¥¼ ë¶„ë¦¬í•˜ëŠ” ë‹¨ì ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ê·¸ë ‡ì§€ë§Œ, ê°€ë…ì„±ì´ í–¥ìƒë˜ì–´ì„œ ìœ„ ì½”ë“œë¥¼ ìµœì¢… ìˆ˜ì •ì— ë°˜ì˜í–ˆìŠµë‹ˆë‹¤.


5ï¸âƒ£ **tableview ë ˆì´ì•„ì›ƒ ì—ëŸ¬**

<img src="https://i.imgur.com/9HMBHuJ.png" width="500">

ìŠ¤í† ë¦¬ë³´ë“œì—ì„œ í…ŒìŠ¤íŠ¸í•´ë³´ë‹ˆ, ë·° ì•ˆì— ë ˆì´ë¸” ë„£ìœ¼ë©´ ìŠ¤í† ë¦¬ë³´ë“œì—ì„œ ì¦‰ê°ì ìœ¼ë¡œ ë†’ì´ ì¡°ì ˆë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ë ˆì´ë¸”ë·°ê°€ ìŠ¤íƒë·°ì— ë“¤ì–´ê°ˆ ë•ŒëŠ” ìë™ìœ¼ë¡œ ë†’ì´ ì¡°ì ˆë©ë‹ˆë‹¤.

ìŠ¤íƒë·°ëŠ” intrinsic content sizeë¥¼ ì‚¬ìš©í•´ì„œ ë†’ì´ë¥¼ ìë™ìœ¼ë¡œ ë§ì¶”ëŠ” ê²ƒ ê°™ìŠµë‹ˆë‹¤. ë°˜ë©´, labelì„ viewì— ë„£ì—ˆì„ ë•ŒëŠ” viewê°€ ìŠ¤ìŠ¤ë¡œ ë†’ì´ ê²°ì •í•˜ì§€ ëª»í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.

ìœ„ ì—ëŸ¬ëŠ” í…Œì´ë¸”ë·° ì…€ì˜ ë†’ì´ê°€ ì •í•´ì§€ì§€ ì•Šì•„ì„œ ë°œìƒí•œ ë¬¸ì œë¼ê³  ìƒê°ë˜ì–´ ì•„ë˜ ì½”ë“œë¥¼ í†µí•´ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

<img src="https://i.imgur.com/gtIXMdN.png" width="300">

```swift
titleLabel.heightAnchor.constraint(equalTo: informationStackView.heightAnchor)
```

bodyê°€ ë“¤ì–´ê°€ì§€ ì•ŠëŠ” ê²½ìš° stackViewì—ì„œ ë„ˆë¹„ë¥¼ ëª¨í˜¸í•˜ë‹¤ê³  ì¸ì‹í•˜ëŠ” ë ˆì´ì•„ì›ƒ ì—ëŸ¬ê°€ ìƒê²¼ìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì•„ë˜ì™€ ê°™ì´ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
```swift
label.setContentHuggingPriority(
        .required,
        for: .horizontal
)
```

6ï¸âƒ£ **ì½”ë“œ ì»¨ë²¤ì…˜**

[ê´€ë ¨ ë§í¬](https://developer.apple.com/documentation/uikit/uiactivityitemsource/1620455-activityviewcontroller)
ê³µì‹ë¬¸ì„œì—ì„œ ë§¤ì„œë“œë¥¼ í‘œê¸°í•˜ëŠ” ë°©ì‹ê³¼ ë™ì¼í•˜ë„ë¡ ì»¨ë²¤ì…˜ì„ ë§ì·„ìŠµë‹ˆë‹¤.
ë§¤ê°œë³€ìˆ˜ê°€ 1ê°œ ì´ìƒ ë“¤ì–´ê°€ëŠ” ê²½ìš° ì¤„ë°”ê¿ˆì„ í–ˆìŠµë‹ˆë‹¤.

ì´ë•Œ, ê°€ë…ì„±ì´ ì¢‹ì§€ ëª»í•˜ë‹¤ê³  ëŠê¼ˆìŠµë‹ˆë‹¤.
ë˜í•œ, ì•„ë˜ ê³µì‹ë¬¸ì„œì˜ ì˜ˆì œ ì½”ë“œë¥¼ ì‚´í´ë³´ë‹ˆ ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ëŠ” ê°œí–‰ ì—†ì´ ì½”ë“œ ì‘ì„±ì´ ëœ ê²ƒì„ í™•ì¸í–ˆê³  ì „ë°˜ì ì¸ ì½”ë“œ ì»¨ë²¤ì…˜ì„ ì¤„ë°”ê¿ˆì„ ëœ í•˜ë„ë¡ ë‹¤ì‹œ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
[ê´€ë ¨ ë§í¬](https://developer.apple.com/documentation/uikit/uitableviewdatasource)

7ï¸âƒ£ **ë¹Œë” íŒ¨í„´ì„ ì ìš©í•œ alert**

ë‹¤ì–‘í•œ í˜•íƒœì˜ alertì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ë¹Œë”íŒ¨í„´ì„ ì‚¬ìš©í•´ì„œ `AlertBuilder`ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
ì„¤ì •í•  ê°’ì„ ë©”ì„œë“œ í˜¸ì¶œì„ í†µí•´ ì„¸íŒ…í•´ì„œ ê°„ê²°í•˜ê²Œ alertControllerë¥¼ ë§Œë“­ë‹ˆë‹¤.
```swift
let alert = AlertBuilder()
            .setTitle("ì§„ì§œìš”?")
            .setMessage("ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ì–´ìš”?")
            .setType(.alert)
            .setAction(action)
            .build()
```

AlertBuilder() ì¸ìŠ¤í„´ìŠ¤ê°€ ë°˜ë³µì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ ì‹±ê¸€í†¤ íŒ¨í„´ì„ ì ìš©í•´ì„œ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ product ì´ˆê¸°í™”ê°€ í•„ìš”í•´ì„œ ì—°ì‚° í”„ë¡œí¼í‹°ë¥¼ í™œìš©í•´ì„œ í˜¸ì¶œ ì‹œ ìƒˆ productì´ í• ë‹¹ë˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

8ï¸âƒ£ **ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©í• ìˆ˜ìˆì–´ì•¼í• ê¹Œ? vs ì¤‘ë³µì½”ë“œë¥¼ ì¤„ì—¬ì•¼í• ê¹Œ? ğŸ« **

ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ Alertê´€ë ¨ ë©”ì„œë“œëŠ” êµ¬í˜„ë˜ì–´ìˆëŠ” ViewControllerëª¨ë‘ ì‚¬ìš©í•˜ê³ ìˆê¸°ë•Œë¬¸ì—UIViewControllerë¥¼ extensioní•˜ì—¬ êµ¬í˜„í•´ë‘ì—ˆìŠµë‹ˆë‹¤.

```swift
extension UIViewController {
  func showDeleteAlert(
          identifier: UUID?,
          handler: @escaping () -> Void
      ) {
          guard let identifier = identifier else {
              return
          }
  
          let action = UIAlertAction(
              title: "Delete",
              style: .destructive
          ) { _ in
              self.deleteHandler(identifier: identifier)
              handler()
          }
        
          let alert = AlertBuilder()
              .setTitle("ì§„ì§œìš”?")
              .setMessage("ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ì–´ìš”?")
              .setType(.alert)
              .setAction(action)
              .build()
        
          present(alert, animated: true)
      }
}
```
í•˜ì§€ë§Œ ì¶”í›„ ìƒˆë¡œìš´ ViewControllerë¥¼ êµ¬í˜„í–ˆì„ë•Œ showDeleteAlert() ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ê²½ìš° ìˆ˜ì •í•´ì•¼í•  ì½”ë“œë¼ê³  ìƒê°ë˜ì–´ í”„ë¡œí† ì½œì„ ì‚¬ìš©í•˜ì—¬ ë¶„ë¦¬í•˜ì˜€ê³  UIViewControllerë¥¼ ìƒì†ë°›ëŠ” íƒ€ì…ë§Œ ì±„íƒí• ìˆ˜ìˆë„ë¡ í•˜ì—¬ presentë©”ì„œë“œë„ í”„ë¡œí† ì½œ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í• ìˆ˜ìˆë„ë¡ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
protocol AlertProtocol: UIViewController {}

extension AlertProtocol {
    func showAlert(title: String, message: String, actions: [UIAlertAction]) {
        let alert = AlertBuilder.shared
            .setTitle(title)
            .setMessage(message)
            .setType(.alert)
            .setActions(actions)
            .build()
        
        present(alert, animated: true)
    }
}
```
í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë²”ìš©ì„±ìˆê²Œ ì‚¬ìš©í• ìˆ˜ìˆë„ë¡ ìˆ˜ì •í•˜ì—¬ ì‚¬ìš©í•˜ê²Œë ê²½ìš° Alertì—ì„œ ì‚¬ìš©ë  actionì„ ì™¸ë¶€ì—ì„œ ì •ì˜í•´ì„œ ë§¤ê°œë³€ìˆ˜ë¡œ ë„£ì–´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.

ê·¸ë ‡ê²Œë˜ë©´ Alertì„ ì‚¬ìš©í•˜ëŠ” ViewController 2ê³³ì—ì„œ ê°ê° ì•¡ì…˜ì„ ì •ì˜í•´ì„œ ë„£ì–´ì£¼ê²Œë˜ê³  ê°™ì€ê¸°ëŠ¥ì„ ì‚¬ìš©í• ê²½ìš° ì¤‘ë³µì½”ë“œê°€ ìƒê¸°ê²Œë©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ì´ë ‡ê²Œ ë²”ìš©ì„±ìˆê²Œ ì‚¬ìš©í• ìˆ˜ìˆë„ë¡ ìˆ˜ì •í• ê²½ìš° í™•ì¥ì„±ì— ì¢€ë” ìš©ì´í•˜ë‹¤ê³  íŒë‹¨ë˜ì–´ ìˆ˜ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

ìµœì¢…ì ìœ¼ë¡œëŠ” ìœ„ì™€ê°™ì´ ìˆ˜ì •í•˜ì—¬ AlertProtocolì„ ì±„íƒí•˜ëŠ” íƒ€ì…ì€ Alertì„ ì‚¬ìš©í• ìˆ˜ìˆì„ê±°ë¼ ìƒê°í• ìˆ˜ìˆê²Œë˜ê³  ìì—°ìŠ¤ëŸ½ê²Œ Alertê³¼ ê´€ë ¨ëœ ë©”ì„œë“œëŠ” AlertProtocolì— ì •ì˜ë˜ì–´ìˆì„ê²ƒì´ë¼ ìƒê°í• ìˆ˜ìˆê²Œë©ë‹ˆë‹¤.

9ï¸âƒ£ **@objc ë©”ì„œë“œ**

selectroì—ì„œ ì‚¬ìš©ë˜ëŠ” @objc ë©”ì„œë“œì—ì„œ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì„ ìˆ˜ ìˆëŠ” íƒ€ì…ì€ gesture ë˜ëŠ” senderì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ UI íƒ€ì…ë“¤(ex. UIButton) ì…ë‹ˆë‹¤. ì‹œìŠ¤í…œì—ì„œ í•´ë‹¹ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©ì ì •ì˜ íƒ€ì…ì€ ë„£ì„ ìˆ˜ ì—†ì–´ì„œ ë©”ì„œë“œ êµ¬í˜„ì— ì œì•½ì´ ë§ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ğŸ”Ÿ **tableView Cellì˜ swipe ì•¡ì…˜ì—ëŸ¬**

í…Œì´ë¸”ë·°ì˜ Delegateë©”ì„œë“œ trailingSwipeActionsConfigurationForRowAt() ë¥¼ ì‚¬ìš©í•˜ì—¬
Alertì„ ë„ìš°ëŠ” ê¸°ëŠ¥ê³¼ ActivityControllerë¥¼ ë„ìš°ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ëŠ”ë° Swipe ì œìŠ¤ì³ë¥¼ ì‚¬ìš©í•œí›„ Delete ë¥¼ í´ë¦­í›„ cancelì„ í´ë¦­í•˜ê²Œë ê²½ìš° Swipeê°€ í•´ì œë˜ì§€ ì•ŠëŠ” ë²„ê·¸ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.

![](https://i.imgur.com/NhOIH8p.gif)

```swift
    let delete = UIContextualAction(style: .destructive, title: "Delete") {
        [weak self] (_, _, completion) in
        self?.showAlert(title: "ì§„ì§œìš”?",
                        message: "ì •ë§ë¡œ ì‚­ì œ í•˜ì‹œê² ì–´ìš”?",
                        actions: [cancelAction, deleteAction])
    }
            
    let share = UIContextualAction(style: .normal, title: "Share") {
        [weak self] (_, _, completion) in
        self?.showActivity(title: cellData.title)
    }
```
ìœ„ì˜ ì½”ë“œì—ì„œ í•´ë‹¹ ì‘ì—…ì´ ëë‚¬ë‹¤ëŠ”ê²ƒì„ ì•Œë¦¬ê¸°ìœ„í•´ completion(true) ì½”ë“œë¥¼ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.
ì•¡ì…˜ì— ë“±ë¡ëœ cancelë²„íŠ¼ì„ ëˆ„ë¥´ë”ë¼ë„ í•´ë‹¹ì‘ì—…ì´ ì™„ë£Œë˜ë„ë¡ í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

```swift
    let delete = UIContextualAction(style: .destructive, title: "Delete") {
        [weak self] (_, _, completion) in
        self?.showAlert(title: "ì§„ì§œìš”?",
                        message: "ì •ë§ë¡œ ì‚­ì œ í•˜ì‹œê² ì–´ìš”?",
                        actions: [cancelAction, deleteAction])
        completion(true)
    }
            
    let share = UIContextualAction(style: .normal, title: "Share") {
        [weak self] (_, _, completion) in
        self?.showActivity(title: cellData.title)
        completion(true)
    }
```

---
## ì§ˆë¬¸í•œê²ƒë“¤
1ï¸âƒ£ **íŒŒì¼ ê·¸ë£¹í™”í•˜ëŠ” ë°©ì‹**
íŒŒì¼ì„ ì‰½ê²Œ ì°¾ê¸° ìœ„í•´ì„œ íŒŒì¼ë“¤ì„ ë¬¶ëŠ” ë°©ì‹ì— ëŒ€í•´ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.
ê° í™”ë©´ë³„ë¡œ ê·¸ë£¹ì„ ë‚˜ëˆ„ê³  ë‚´ë¶€ì—ì„œ ì‚¬ìš©ë˜ëŠ” íƒ€ì…ë“¤ì„ êµ¬í˜„ ì•„í‚¤í…ì²˜ì— ë§ê²Œ MVCë¡œ ê·¸ë£¹í™”í–ˆìŠµë‹ˆë‹¤. ì´ë•Œ, AppDelegate, SceneDelegateë¥¼ Windowë¼ëŠ” ê·¸ë£¹ì— ë„£ì—ˆëŠ”ë° ë” ì¢‹ì€ ê·¸ë£¹ëª…ì´ ìˆëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤.
ë˜, Info, Diary, Asset, LaunchScreenì€ ì–´ë””ì— ê·¸ë£¹í•‘ì„ í•˜ëŠ” ê²ƒì´ ì¢‹ì„ì§€ ê³ ë¯¼ì…ë‹ˆë‹¤.

2ï¸âƒ£ **ì‚¼í•­ ì—°ì‚°ì, nil ë³‘í•© ì—°ì‚°ìì˜ ì„±ëŠ¥**
[ê´€ë ¨ ë§í¬](https://code.iamseapy.com/archives/33)
ì‚¼í•¨ ì—°ì‚°ìë³´ë‹¤ëŠ” ì¡°ê±´ë¬¸ì´, nil ë³‘í•© ì—°ì‚°ìë³´ë‹¤ëŠ” ì˜µì…”ë„ ë°”ì¸ë”©ì„ í•˜ëŠ” ê²ƒì´ ë” ì„±ëŠ¥ì´ ì¢‹ë‹¤ê³  í•˜ì—¬ ì½”ë“œë¥¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

ì‚¼í•­ ì—°ì‚°ìì™€ nil ë³‘í•© ì—°ì‚°ìê°€ ì„±ëŠ¥ì— ì˜í–¥ì„ ë§ì´ ì£¼ëŠ”ì§€, í˜„ì—…ì—ì„œëŠ” ì–´ë–»ê²Œ ì‚¬ìš©ë˜ëŠ”ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤!

3ï¸âƒ£ **ì½”ì–´ë°ì´í„° ì—ëŸ¬ ì²˜ë¦¬**
CRUD ì‹¤íŒ¨ ì‹œ ì—ëŸ¬ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ì§€ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.
alertì„ ë„ìš´ë‹¤ë©´ ë°ì´í„° ì €ì¥/ìˆ˜ì • ì‹¤íŒ¨ ì‹œ ë°±ê·¸ë¼ìš´ì— ì§„ì…í•´ì„œ ë³´ì—¬ì¤„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë˜ëŠ” ìˆ˜ì • í˜ì´ì§€ì—ì„œ ì´ì „í™”ë©´(ì¼ê¸°ì¥ ë¦¬ìŠ¤íŠ¸í™”ë©´)ì„ ë„˜ì–´ê°€ëŠ” ê³¼ì •ì—ì„œ ì €ì¥/ìˆ˜ì • ì‹¤íŒ¨ ì‹œ ì´ì „í™”ë©´ì„ ìƒˆë¡œ ë„ìš°ë©´ì„œ(ì¼ê¸°ì¥ ë¦¬ìŠ¤íŠ¸í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ê²ƒì„ ë§‰ìœ¼ë©´ì„œ?) alertì„ ë³´ì´ëŠ” ê²ƒì´ ì´ìƒí•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. textView edit modeê°€ ì•„ë‹ ë•Œ (`textViewDidEndEditing`ë§¤ì„œë“œ)ì˜ ì €ì¥/ìˆ˜ì • ì‹¤íŒ¨ ì—ëŸ¬ ì²˜ë¦¬ë§Œ ê°€ëŠ¥í•  ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì½”ì–´ë°ì´í„°ì˜ ì—ëŸ¬ì²˜ë¦¬ë¥¼ ì–´ë–»ê²Œ í•˜ëŠ” ê²ƒì´ ì¢‹ì„ì§€ ê³ ë¯¼ì¤‘ì…ë‹ˆë‹¤.ğŸ˜¢

4ï¸âƒ£ **ë©”ì„œë“œ ì—­í•  ë¶„ë¦¬**
UpdateViewControllerì— ìˆëŠ” dataSave()ì˜ ê²½ìš° createì™€ updateê°€ ê°™ì´ ì‚¬ìš©í•´ì„œ ë‚´ë¶€ ë¡œì§ì´ ë·° ì»¨ì—ê²Œ ë…¸ì¶œëœ ìƒíƒœì˜€ìŠµë‹ˆë‹¤.

í•´ë‹¹ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ìš©ë„ë¥¼ Mode íƒ€ì…ì„ í†µí•´ êµ¬ë¶„í•˜ë ¤ë©´ íŠ¹ì • íƒ€ì…ì—ì„œ(DiaryViewcontrollerì™€ UpdateViewController) ì‚¬ìš©í•˜ë„ë¡ í•œì •í•˜ëŠ” ê²ƒì´ í•„ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ protocolì„ í†µí•´ extensionì—ì„œ ê¸°ë³¸êµ¬í˜„ì„ ì‚¬ìš©í•´ì„œ íƒ€ì…ì„ ì •ì˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë˜, viewControllerì˜ ì¶”ìƒí´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ë‘ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ìƒì†ë°›ë„ë¡ í•˜ëŠ” í˜•ì‹ì€ ì ì ˆí•˜ì§€ ì•Šì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
ë”°ë¼ì„œ, DiaryDAO.shared.save(data, isNew: true)ì™€ ê°™ì€ ë©”ì„œë“œë¥¼ í†µí•´ ë¡œì§ ìì²´ë¥¼ viewControllerê°€ ì•„ë‹Œ DiaryDAOì—ì„œ ì²˜ë¦¬í•˜ë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.
```swift
func save(_ newData: DiaryDTO?, isNew: Bool) {
        if isNew {
            create(userData: newData)
        } else {
            update(userData: newData)
        }
    }
```
ìœ„ ë©”ì„œë“œ êµ¬í˜„ìœ¼ë¡œ create, update ë©”ì„œë“œë¥¼ ì€ë‹‰í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

----

## STEP 3 êµ¬í˜„
## ê³ ë¯¼í–ˆë˜ ê²ƒë“¤(íŠ¸ëŸ¬ë¸” ìŠˆíŒ…)
1ï¸âƒ£ **MVC ì•„í‚¤í…ì²˜ì— ë§ê²Œ ì—­í•  ë¶„ë¦¬**
ViewControllerê°€ viewë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ì§€ ì•Šë„ë¡ ì—­í•  ë¶„ë¦¬í–ˆìŠµë‹ˆë‹¤.
UIViewControllerì˜ ê¸°ë³¸ í”„ë¡œí¼í‹°ì¸ viewì— ì»¤ìŠ¤í…€ viewë¥¼ í• ë‹¹í•˜ê³  viewì˜ ìš”ì†Œê°€ í•„ìš”í•  ë•ŒëŠ” ë©”ì„œë“œë¥¼ í†µí•´ ê°„ì ‘ì ìœ¼ë¡œ ì ‘ê·¼í•©ë‹ˆë‹¤.

DiaryViewControllerì˜ ê²½ìš° ì»¤ìŠ¤í…€ view(DiaryView)ì˜ tableViewì˜ dataSource ì„¤ì •ì´ í•„ìš”í•´ì„œ DiaryViewModelë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.
DiaryViewControllerëŠ” í”„ë¡œí¼í‹°ë¡œ DiaryViewModelë¥¼ ê°€ì§€ê³  tableViewëŠ” ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•´ì„œ ì ‘ê·¼í•˜ë„ë¡ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.(viewModelì´ tableViewë¥¼ ê°€ì§€ë©´ ì˜ì¡´ì„± ë°©í–¥ì´ ì´ìƒí•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤. viewControllerì˜ viewê°€ ì´ë¯¸ tableViewë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ê¸° ë•Œë¬¸ì— viewModelì´ êµ³ì´ tableViewë¥¼ í”„ë¡œí¼í‹°ë¡œ ê°€ì§€ì§€ ì•Šì•„ë„ ê´¸ë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.)

DiaryCellì—ì„œ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•  ë•Œ urlì„ ì•Œ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ë„¤í¬ì›Œí¬ë¥¼ ê´€ë¦¬í•˜ëŠ” íƒ€ì…ì¸ WeatherAPIManagerë¥¼ extensioní•˜ê³  ì´ë¯¸ì§€ë¥¼ ë°›ì•„ì˜¤ëŠ” ë©”ì„œë“œë¥¼ êµ¬í˜„í–ˆê³ (setImage ë©”ì„œë“œ) viewì—ì„œëŠ” ë©”ì„œë“œ í˜¸ì¶œ ì‹œ icon ë¬¸ìì—´ë§Œ ë„˜ê²¨ì£¼ë©´ ì´ë¯¸ì§€ë¥¼ ì„¸íŒ…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. WeatherAPIManagerì˜ ë©”ì„œë“œ(setImage ë©”ì„œë“œ)ë¥¼ í˜¸ì¶œí•˜ëŠ” ë¶€ë¶„ë„ ì…€ì´ ì•Œ í•„ìš”ëŠ” ì—†ì„ ê²ƒ ê°™ì•„ì„œ UIImageViewì— ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì„œ ìˆ¨ê²¼ìŠµë‹ˆë‹¤.

UpdateViewControllerì—ì„œë„ viewë¥¼ ë”°ë¡œ ë¶„ë¦¬í•´ì„œ keyboard í”„ë¡œí¼í‹°ë¥¼ viewë§Œ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2ï¸âƒ£ **iOS App íŠ¹ì • HTTP ì ‘ê·¼ í—ˆìš©ë°©ë²•**
í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰ í•˜ëŠ”ë° ATS(App Transport Security) ë¼ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

ë„¤íŠ¸ì›Œí¬ í†µì‹ ì¤‘ì— ë°œìƒí•œ ì—ëŸ¬ì¸ë° ìš”ë…€ì„ì´ ë­”ì§€ ì°¾ì•„ë³´ë‹ˆ IOS9 ë²„ì „ ì´í›„ë¶€í„°ëŠ” ë³´ì•ˆì— ì·¨ì•½í•œ ë„¤íŠ¸ì›Œí¬ë¥¼ ì°¨ë‹¨í•œë‹¤ê³  í•œë‹¤.

ê·¸ë˜ì„œ ì•„ë¬´ ì„¤ì •ì—†ì´ HTTP ì— ì ‘ê·¼í•˜ë©´ ì½˜ì†”ì°½ì— App Transport Security ë¼ê³  í•˜ëŠ” ì—ëŸ¬ê°€ ë‚˜ì˜¤ê²Œë˜ëŠ”ë° Info.plistë¥¼ ìˆ˜ì •í•´ HTTPì ‘ê·¼ì„ í—ˆìš©í•´ì£¼ì–´ì•¼ í•œë‹¤!

ì•„ë˜ì˜ ì‚¬ì§„ì²˜ëŸ¼ íŠ¹ì • HTTPì˜ ì£¼ì†Œë¥¼ ê¸°ì¬í•´ì£¼ë©´ ëœë‹¤!

![](https://i.imgur.com/ZfYDO15.png)
```
ì£¼ì˜ì‚¬í•­

Allow Arbitary Loads ì˜ ê°’ì„ YES ë¡œ ì„¤ì •í•˜ê³ , Exception Domainsì—ê°’ì´
ì—†ë‹¤ë©´ ëª¨ë“  HTTP í†µì‹ ì„ í—ˆìš©í•˜ê²Œëœë‹¤.
```

## ì§ˆë¬¸í•œê²ƒë“¤

1ï¸âƒ£ **ìƒˆë¡œ ì‘ì„±ëœ ë°ì´í„°ì™€ ìˆ˜ì •ëœ ë°ì´í„°ë¥¼ ë¦¬ìŠ¤íŠ¸ì—ì„œ ì–´ë–»ê²Œ ë³´ì—¬ì¤„ê¹ŒğŸ¤”**

ë°ì´í„° ì‘ì„± í˜ì´ì§€ì—ì„œ ëª©ë¡ í˜ì´ì§€ë¡œ ë„˜ì–´ì˜¬ ë•Œ ì½”ì–´ ë°ì´í„°ì˜ ë‚´ìš©ì„ ì „ë¶€ ì½ì–´ì„œ í…Œì´ë¸” ë¦¬ìŠ¤íŠ¸ë¥¼ ë³´ì—¬ì£¼ë ¤ë‹ˆ ì½”ì–´ë°ì´í„°ë¡œ ì ‘ê·¼í•˜ëŠ” ì‹œì  ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤. ë°ì´í„° ì €ì¥ ì™„ë£Œë˜ì§€ ì•ŠëŠ” ìƒíƒœì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì½ìœ¼ë ¤ë‹ˆ ì…€ì˜ ìœ„ì¹˜ê°€ ì›€ì§ì´ê³  ìƒˆë¡œ ì¶”ê°€í•œ ë°ì´í„°ê°€ ë°”ë¡œ ë‚˜íƒ€ë‚˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.(ìˆ˜ì •í•œ ê²½ìš°ëŠ” ì˜ ë°˜ì˜ ë˜ì—ˆìŠµë‹ˆë‹¤.)

* ì‹œë„ 1: ì½”ì–´ë°ì´í„° ì ‘ê·¼ì€ ìµœì´ˆ ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë”© ë•Œë§Œ ì‹œë„í•˜ê³  ì´í›„ëŠ” snapshotì„ í™œìš©í•œë‹¤.
* ì‹œë„ 2: ë°ì´í„°ë¥¼ 1ì´ˆ í›„ì— ì½ì–´ì˜¨ë‹¤.

ì‹œë„ 1ì€ ì‹¤íŒ¨í–ˆê³  ì‹œë„ 2ë¡œ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

coreDataë¥¼ ìµœì´ˆì— ëª©ë¡í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ(viewDidLoad()ì—ì„œ) í•œ ë²ˆë§Œ loadí•˜ê³  ì´í›„ë¶€í„°ëŠ” snapshotì„ ìˆ˜ì •í•´ì„œ ë°ì´í„°ë¥¼ í…Œì´ë¸”ì— ë°˜ì˜í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.

ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ë©´ ì½”ì–´ë°ì´í„°ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì‘ì„± í˜ì´ì§€ì—ì„œ ì¶”ê°€í•œ ë°ì´í„°ë¥¼ ë°”ë¡œ ë°ì´í„°ë¥¼ ë„˜ê¸°ê³  ì‹¶ìŠµë‹ˆë‹¤. ì¶”ê°€í•œ ë°ì´í„°ë¥¼ ì´ì „ í™”ë©´ì˜ ìŠ¤ëƒ…ìƒ·ì— ì¶”ê°€í•˜ëŠ” ê²ƒì€ ì•„ë˜ ì‘ì„±í•œ ì½”ë“œë¡œ ì„±ê³µí–ˆìŠµë‹ˆë‹¤.
ê·¸ë ‡ì§€ë§Œ ìˆ˜ì •í•˜ëŠ” ê²½ìš°ëŠ” ì•„ë˜ì˜ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.ğŸ˜¢

> Invalid item identifier specified for reload: Diary.DiaryDTO(identifier: ED4AB649-9DF0-40CB-87D8-EA7210C03F9E, title: \"Koopoo\", body: \"\", date: 2022-06-27 15:00:00 +0000, icon: nil)"

snapshotì˜ íŠ¹ì • ì•„ì´í…œì„ ìˆ˜ì •í•˜ê³  ë°˜ì˜í•˜ëŠ” ë°©ë²•ì— ì¡°ì–¸ì„ ì–»ê³  ì‹¶ìŠµë‹ˆë‹¤ğŸ˜­
ì•„ë‹ˆë©´ ì¼ê¸°ì¥ì´ ìˆ˜ì •ëœ ê²½ìš°ëŠ” ê¸°ì¡´ ìŠ¤ëƒ…ìƒ·ì„ ì´ìš©í•˜ì§€ ì•Šê³  ê¸°ì¡´ ë°©ì‹ì²˜ëŸ¼ ì½”ì–´ë°ì´í„°ì˜ ê²ƒì„ ë‹¤ ì½ì–´ì˜¤ëŠ” ê²ƒì´ ë‚˜ì„ê¹Œìš”?

```swift
protocol UpdateProtocol: UIViewController {
    func updateList(data: DiaryDTO)
    func edit(data: DiaryDTO)
}

final class UpdateViewController {
    private weak var delegate: UpdateProtocol?
    
    init(diaryData: DiaryDTO? = nil, delegate: UpdateProtocol) {
        self.diaryData = diaryData
        self.delegate = delegate
        super.init(nibName: nil, bundle: nil)
    }
    
    private func saveData() {
        ...
        
        if isSavingData == false {
            DiaryDAO.shared.save(data, isNew: isNew)
            isSavingData = true
            if isNew {
                delegate?.updateList(data: data)
            } else {
                delegate?.edit(data: data)
            }
        }
    }
}

extension DiaryViewController: UpdateProtocol {
    func updateList(data: DiaryDTO) {
        currentSnapShot.appendItems([data])
        dataSource?.apply(currentSnapShot)
    }
    
    func edit(data: DiaryDTO) {
        currentSnapShot.reloadItems([data])//íŠ¹ì • ì•„ì´í…œë§Œ ìˆ˜ì •
        dataSource?.apply(currentSnapShot)
    }
}

final class DiaryViewController: UIViewController, DiaryProtocol {
    ...
    private var currentSnapShot = NSDiffableDataSourceSnapshot<Int, DiaryDTO>()
    
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
        ...
        
        currentSnapShot.appendSections([.zero])
        
        setUpCoreData() //ViewWillAppearì—ì„œ í•˜ë˜ ê²ƒ ì—¬ê¸°ë¡œ ì´ë™
    }
    
    ...
    
    private func setUpSnapshot(data: [DiaryDTO]) {//í”„ë¡œí¼í‹° snapshot ì´ìš©
        currentSnapShot.appendItems(data)
        dataSource?.apply(currentSnapShot)
    }
}
```
2ï¸âƒ£ **ê¸°ëŠ¥ ìš”êµ¬ì„œì˜ ë§ˆì´ê·¸ë ˆì´ì…˜ğŸ¤”** 
https://developer.apple.com/documentation/coredata/using_lightweight_migration

ì¼ê¸°ì¥ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ entityì— attributeë¥¼ ì¶”ê°€í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
ê³µì‹ ë¬¸ì„œë¥¼ ì½ì–´ë³´ë©´ entity ëª¨ë¸ì´ ìˆ˜ì • ì‚¬í•­ì´ ìˆì„ë•Œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ í•´ì•¼í•œë‹¤ê³  ì‘ì„±ë˜ì–´ìˆìŠµë‹ˆë‹¤!

**ë§ˆì´ê·¸ë ˆì´ì…˜ ì´ë€?**
"ë°ì´í„°ë² ì´ìŠ¤ì˜ ìŠ¤í‚¤ë§ˆë¥¼ ìµœì‹  ë˜ëŠ” ì´ì „ ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ ë˜ëŒë¦´ í•„ìš”ê°€ ìˆì„ ë•Œë§ˆë‹¤ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ìˆ˜í–‰ë˜ëŠ” ê³¼ì •"

![](https://i.imgur.com/PFl2ld7.png)

![](https://i.imgur.com/Hm2ycJF.png)

êµ¬ê¸€ë§í•˜ì—¬ ê²€ìƒ‰í•´ë³´ë‹ˆ attributeë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ì¶”ê°€í• ê²½ìš° ë²„ì ¼ì„ ë‚˜ëˆ„ì–´ ê´€ë¦¬í•´ì•¼í•œë‹¤ëŠ” ê¸€ì„ ë´¤ìŠµë‹ˆë‹¤!

ë°ì´í„° ë² ì´ìŠ¤ê°€ ìˆ˜ì •ë ê²½ìš° ì—ëŸ¬ê°€ ë°œìƒí•˜ê²Œë˜ì–´ ì•±ì„ ì‚¬ìš©í•˜ë˜ìœ ì €ëŠ” ì—ëŸ¬ë¥¼ í•´ê²°í•˜ê¸°ìœ„í•´ì„œëŠ” ì•±ì„ ì œê±°í›„ ì¬ì„¤ì¹˜ë¥¼ í•´ì•¼ë˜ëŠ”ìƒí™©ì´ ë°œìƒë˜ê¸°ë•Œë¬¸ì¸ë° ì´ë¥¼ í•´ê²°í•˜ê¸°ìœ„í•´ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ í•´ì£¼ëŠ”ê²ƒ ê°™ìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ë©´ ì•±ì˜ ë²„ì „ì„ ì¶”ê°€í•˜ì—¬(ì˜ˆë¥¼ë“¤ë©´ ê¸°ì¡´ì•±ì˜ ë²„ì „ì€ 1, ë°ì´í„°ë² ì´ìŠ¤ ìˆ˜ì •í›„ëŠ” 2) ë²„ì „ì´ 2ë³´ë‹¤ ë‚®ì€ê²½ìš° ë²„ì „ì„ 2ë¡œ ìˆ˜ì • í•˜ëŠ” ì‘ì—…ì„ í•˜ëŠ”ê²ƒ ê°™ìŠµë‹ˆë‹¤!

í•˜ì§€ë§Œ ì €í¬ í”„ë¡œì íŠ¸ì—ì„œ entityì— attributeë¥¼ ì¶”ê°€í–ˆìŒì—ë„ ì—ëŸ¬ê°€ ë°œìƒë˜ì§€ ì•Šì•˜ê³  ì•±ì˜ UIë¥¼ ë³€ê²½í–ˆê¸°ë•Œë¬¸ì— ë°ì´í„°ë² ì´ìŠ¤ì˜ ì—ëŸ¬ì™€ ìƒê´€ì—†ì´ ìœ ì €ëŠ” ì•±ì„ ì—…ë°ì´íŠ¸ í•´ì•¼í•œë‹¤ê³  ìƒê°ë˜ì–´ í•´ë‹¹ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

ë§ˆì´ê·¸ë ˆì´ì…˜ ì €í¬ê°€ ì´í•´í•œê¸°ëŠ¥ì´ ë§ëŠ”ê²ƒì¸ì§€ ê¶ê¸ˆí•©ë‹ˆë‹¤..!ğŸ¥²



