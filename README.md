# ì¼ê¸°ì¥ 

- í”„ë¡œì íŠ¸ ê¸°ê°„: [2023ë…„ 7ì›” 24ì¼ ~ 8ì›” 23ì¼](#íƒ€ì„ë¼ì¸)
- í”„ë¡œì íŠ¸ íŒ€ì›: [kyungminğŸ¼](https://github.com/YaRkyungmin), [DasanğŸŒ³](https://github.com/DasanKim)
- í”„ë¡œì íŠ¸ ë¦¬ë·°ì–´: [ì œì„ìŠ¤]()

---
## ğŸ“– ëª©ì°¨
ğŸ€ [ì†Œê°œ](#ì†Œê°œ) </br>
ğŸ’» [ì‹¤í–‰ í™”ë©´](#ì‹¤í–‰_í™”ë©´) </br>
ğŸ› ï¸ [ì‚¬ìš© ê¸°ìˆ ](#ì‚¬ìš©_ê¸°ìˆ ) </br>
ğŸ‘€ [ë‹¤ì´ì–´ê·¸ë¨](#Diagram) </br>
ğŸ§¨ [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”_ìŠˆíŒ…) </br>
ğŸ“š [ì°¸ê³  ë§í¬](#ì°¸ê³ _ë§í¬) </br>
ğŸ‘©â€ğŸ‘§â€ğŸ‘§ [about TEAM](#about_TEAM) </br>

</br>

## ğŸ€ ì†Œê°œ<a id="ì†Œê°œ"></a>
- ì¼ê¸°ë¥¼ ì‘ì„±, ìˆ˜ì •, ì €ì¥ í•  ìˆ˜ ìˆëŠ” ì¼ê¸°ì¥ ì•±ì…ë‹ˆë‹¤.

</br>

## ğŸ’» ì‹¤í–‰ í™”ë©´<a id="ì‹¤í–‰_í™”ë©´"></a>

| ìƒˆë¡œìš´ ì¼ê¸°ì¥ í¸ì§‘ í™”ë©´ | ê¸°ì¡´ ì¼ê¸°ì¥ í¸ì§‘ í™”ë©´ |
| :--------: | :--------: |
| <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1147096040412020787/1.gif" width = "200"> | <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1147096095302893608/2.gif"  width = "200"> |

| í™”ë©´ëª¨ë“œ ë³€ê²½ |
| :--------: | 
| <img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1147059093564031026/946ecb3d2ec30a64.gif" width = "440"> | 

</br>

## ğŸ› ï¸ ì‚¬ìš© ê¸°ìˆ <a id="ì‚¬ìš©_ê¸°ìˆ "></a>
| êµ¬í˜„ ë‚´ìš©	| ë„êµ¬ |
|:---:|:---:|
|ì•„í‚¤í…ì³|MVC|
|UI|UIKit|
|Localized|Locale|
|ë¦¬ìŠ¤íŠ¸ í‘œì‹œ|Modern Collection Veiw|

</br>

## ğŸ‘€ Diagram<a id="Diagram"></a>
### ğŸ“ UML
(ì¶”í›„ ì¶”ê°€)


</br>

## ğŸ§¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…<a id="íŠ¸ëŸ¬ë¸”_ìŠˆíŒ…"></a>

### 1ï¸âƒ£ íƒ€ì… ë¶„ë¦¬
âœ¨ ëª¨ë¸ íƒ€ì… ë³„ ê¸°ëŠ¥
- `DiaryData` : `JSON` ë°ì´í„°ë¥¼ ë””ì½”ë”©í• ë•Œ ì‚¬ìš©, `DTO`
- `Diary` : ì‹¤ì œ `VC`ì—ì„œ ì‚¬ìš©í•  ë°ì´í„°
- `AssetDataManager` : `filename`ì„ í†µí•´ `Asset`ë°ì´í„°ë¥¼ ë°›ì•„ì™€ ë””ì½”ë”©í•´ì£¼ëŠ” ì—­í™œ
- `DataManager` : `DTO`ë¥¼ `Diary` íƒ€ì…ìœ¼ë¡œ ë³€í™˜ í•´ì£¼ëŠ” ì—­í™œ
- `DateManager` : í•„ìš”í•œ ë‚ ì§œë¥¼ ì›í•˜ëŠ” í…œí”Œë¦¿ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ `String`ìœ¼ë¡œ ë°˜í™˜ í•´ì£¼ëŠ” ì—­í™œ
- `DiaryManager`: `VC`ì™€ `Model` ì‚¬ì´ì—ì„œ í•„ìš”í•œ ë°ì´í„°ë‚˜ ì´ë²¤íŠ¸ë¥¼ ì—­í™œì— ë§ëŠ” `Manager`ì—ê²Œ ì „ë‹¬ í•´ì£¼ëŠ” ì—­í™œ

ğŸš¨ **ë¬¸ì œì ** <br>
- `DTO`ì¸ `DiaryData`ì™€ `Diary`ë¥¼ í†µí•©í•´ì„œ í•˜ë‚˜ì˜ íƒ€ì…ìœ¼ë¡œ ì‚¬ìš© í• ì§€, ë¶„ë¦¬í•´ì„œ ì‚¬ìš©í•  ì§€ì— ëŒ€í•´ ê³ ë¯¼í–ˆìŠµë‹ˆë‹¤.

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- í†µí•©í•˜ì—¬ ì‚¬ìš© í•˜ë©´ `cellRegistration`ì—ì„œ `cell`ì— ë°ì´í„°ë¥¼ ì…ë ¥ì‹œì¼œ ì¤„ ë•Œë§ˆë‹¤ ë°ì´í„° ë³€í™˜ì„ `DiaryManager`ë¥¼ í†µí•´ ìš”ì²­í•´ì¤˜ì•¼ í–ˆê³ , ë¶„ë¦¬í•˜ì—¬ ì‚¬ìš© ì‹œ `DiaryData`ë¥¼ `fetch`í•´ ì˜¬ ë•Œ `Data`ë¥¼ ì •ì œ ì‹œì¼œì¤˜ì•¼ í–ˆìŠµë‹ˆë‹¤.
- ê° ì…€ì— ë°ì´í„°ë¥¼ ì£¼ì…í•´ ì¤„ ë•Œë§ˆë‹¤ `DiaryManager`ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ëŠ” ê²ƒë³´ë‹¤ fetchí• ë•Œ ì •ì œí•´ì£¼ëŠ”ê²ƒì´ ì˜¤ë²„í—¤ë“œê°€ ë” ì ë‹¤ê³  íŒë‹¨í•˜ì˜€ê¸° ë•Œë¬¸ì— `DiaryData`ì™€ `Diary`ë¥¼ ë¶„ë¦¬í•˜ì—¬ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.


### 2ï¸âƒ£ TextViewì™€ Keyboard
í¸ì§‘ì¤‘ì¸ í…ìŠ¤íŠ¸ê°€ í‚¤ë³´ë“œì— ì˜í•´ ê°€ë¦¬ì§€ ì•Šë„ë¡í•˜ê¸° ìœ„í•˜ì—¬ `diaryTextView`ì™€ `keyboard` ì‚¬ì´ì— ë ˆì´ì•„ì›ƒ ì„¤ì •ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.

ğŸš¨ **ë¬¸ì œì ** <br>
- diaryTextViewì™€ `keyboardLayoutGuide` ì‚¬ì´ì— constraintë¥¼ ì•„ë˜ì™€ ê°™ì´ ì¡ì•„ì£¼ì—ˆìŠµë‹ˆë‹¤.
    - í‚¤ë³´ë“œì˜ ìœ„ì¹˜ë¥¼ ì¶”ì í•˜ëŠ” `keyboardLayoutGuide`ì™€ constraintë¥¼ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
    - ë”ë¶ˆì–´ readabilityì— ìµœì í™”ëœ widthë¥¼ ì œê³µí•´ì£¼ëŠ” `readableContentGuide`ì™€ constraintë¥¼ ì„¤ì •í•˜ì—¬, **ê¸´ ê¸€ì„ ì‰½ê²Œ ì½ì„ ìˆ˜ ìˆë„ë¡** í•˜ì˜€ìŠµë‹ˆë‹¤.
    ```swift
    NSLayoutConstraint.activate([
        diaryTextView.topAnchor.constraint(equalTo: view.readableContentGuide.topAnchor),
        diaryTextView.bottomAnchor.constraint(equalTo: view.keyboardLayoutGuide.topAnchor),
        diaryTextView.leftAnchor.constraint(equalTo: view.readableContentGuide.leftAnchor),
        diaryTextView.rightAnchor.constraint(equalTo: view.readableContentGuide.rightAnchor)
    ])
    ```
- í•˜ì§€ë§Œ `keyboardLayoutGuide` ê°™ì€ ê²½ìš° `iOS 15`ì—ì„œë¶€í„° ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
- ì•„ë˜ì™€ ê°™ì´ `iOS15` ì´ìƒì„ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒë“¤ì´ ëŒ€ë¶€ë¶„ì´ì§€ë§Œ ê·¸ ì´í•˜ ë²„ì „ì„ ì‚¬ìš©í•˜ëŠ” `6%`ë¥¼ ìœ„í•˜ì—¬ ë‹¤ë¥¸ ë°©ë²•ì„ ëª¨ìƒ‰í•  í•„ìš”ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.
    ![](https://hackmd.io/_uploads/B194oMyC3.png)

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- iOS 15 ì´ìƒì¼ ë•Œì™€ ê·¸ ë¯¸ë§Œ ë²„ì „ì¼ ë•Œë¥¼ ë‚˜ëˆ„ì–´ ë ˆì´ì•„ì›ƒì„ ì ìš©í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
    - iOS 15ì´ìƒ: keyboardLayoutGuide ì ìš©
    - iOS 15ë¯¸ë§Œ: diaryTextViewì˜ contentInset ë³€ê²½

- iOS 15ë¯¸ë§Œì¼ ë•Œì—ëŠ” `NotificationCenter`ë¥¼ í†µí•´ í‚¤ë³´ë“œê°€ ë‚˜íƒ€ë‚˜ê³  ì‚¬ë¼ì§ˆ ë•Œë¥¼ ì¶”ì í•˜ì—¬, `diaryTextView`ì˜ `contentInset.bottom`ì„ í‚¤ë³´ë“œ ë†’ì´ë§Œí¼ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.
    <details>
    <summary> ì½”ë“œ ë³´ê¸° </summary>
    
    ```swift
    // DiaryDetailViewController.swift
    override func viewWillAppear(_ animated: Bool) {
        if #unavailable(iOS 15.0) {
            addKeyboardObserver()
        }
    }

    private func addKeyboardObserver() {
        NotificationCenter.default.addObserver(
            self,
            selector: #selector(keyboardWillShow),
            name: UIResponder.keyboardWillShowNotification,
            object: nil
        )
    }

    @objc private func keyboardWillShow(_ notification: Notification) {
        guard let userInfo = notification.userInfo as NSDictionary?,
              let keyboardFrame = (userInfo[UIResponder.keyboardFrameEndUserInfoKey] as? NSValue)?.cgRectValue else {
            return
        }

        diaryTextView.contentInset = UIEdgeInsets(
            top: .zero,
            left: .zero,
            bottom: keyboardFrame.size.height,
            right: .zero
        )
    }
    ```
    </details>

### 3ï¸âƒ£ Locale ì ìš©

ğŸš¨ **ë¬¸ì œì ** <br>
- Date í¬ë§·ì„ DateFormatterì˜ lacaleì„ `ko_KR`ë¡œ ì ìš©í•˜ì˜€ì„ ë•Œ ì§€ì—­í™”ê°€ ë˜ì§€ ì•ŠëŠ” ë¬¸ì œì ì´ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
    ```swift
    dateFormatter.locale = Locale(identifier: "ko_KR")
    ```

ğŸ’¡ **í•´ê²°ë°©ë²•** <br>
- **í”„ë¡œí¼í‹°ë¥¼ ì½ì„ ë‹¹ì‹œ ì‚¬ìš©ìì˜ ì§€ì—­ ì„¤ì •ì„ ë‚˜íƒ€ë‚´ëŠ”** Localeì˜ `current` í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ì—¬ ì§€ì—­í™” ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.
    ```swift
    dateFormatter.locale = Locale.current.identifier
    ```
<br>

## ğŸ“š ì°¸ê³  ë§í¬<a id="ì°¸ê³ _ë§í¬"></a>
- [ğŸApple Docs: Layout](https://developer.apple.com/design/human-interface-guidelines/layout)
- [ğŸApple Docs: KeyboardLayoutGuide](https://developer.apple.com/documentation/uikit/uiview/3752221-keyboardlayoutguide)
- [ğŸApple Docs: UITextView](https://developer.apple.com/documentation/uikit/uitextview)
- [ğŸApple Docs: current](https://developer.apple.com/documentation/foundation/locale/2293654-current)
- [ğŸApple Docs: DateFormatter](https://developer.apple.com/documentation/foundation/dateformatter)

<br>

---

## ğŸ‘©â€ğŸ‘§â€ğŸ‘§ about TEAM<a id="about_TEAM"></a>

| <Img src = "https://cdn.discordapp.com/attachments/1100965172086046891/1108927085713563708/admin.jpeg" width="100"> &nbsp; ğŸ¼KyungminğŸ¼  | https://github.com/YaRkyungmin |
| -------- | -------- |
| <Img src = "https://user-images.githubusercontent.com/106504779/253477235-ca103b42-8938-447f-9381-29d0bcf55cac.jpeg" width="100"> &nbsp; **ğŸŒ³DasanğŸŒ³** | **https://github.com/DasanKim** |

- [íƒ€ì„ë¼ì¸ ë§í¬](https://github.com/YaRkyungmin/ios-diary/wiki/íƒ€ì„ë¼ì¸-ğŸ“‹)
